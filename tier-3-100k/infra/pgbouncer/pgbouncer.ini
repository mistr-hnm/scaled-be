[databases]
;; Map the 'myapp' alias to the actual Postgres Primary and Replica
;; Your Node.js code will connect to 'myapp_primary' and 'myapp_replica'
myapp_primary = host=postgres-primary port=5432 dbname=myapp
myapp_replica = host=postgres-replica port=5432 dbname=myapp

[pgbouncer]
listen_addr = 0.0.0.0
listen_port = 6432
auth_type = md5
auth_file = /etc/pgbouncer/userlist.txt

;; TIER 3 SETTINGS
pool_mode = transaction        ;; Critical for 100k req/s
max_client_conn = 10000        ;; Allow many app workers to connect
default_pool_size = 100        ;; But keep only 100 real connections to DB
reserve_pool_size = 20